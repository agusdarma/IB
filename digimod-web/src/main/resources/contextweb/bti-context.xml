<?xml version="1.0" encoding="UTF-8"?>
<beans 
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:task="http://www.springframework.org/schema/task"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

	<!-- ========================= BUSINESS OBJECT DEFINITIONS ========================= -->
	<!-- BTI Sequence Generator -->
	<bean id="btiSequenceManager"
		class="id.co.emobile.samba.web.service.SequenceGeneratorService"
			init-method="initService">
		<property name="appName" value="BTI_SEQ" />
		<property name="range" value="1000" />
		<property name="sequenceStrategy">
			<bean class="id.co.emobile.samba.web.sequence.DigitsSequenceStrategy">
				<property name="limit" value="999999" />
			</bean>
		</property>
	</bean>
	
	<!-- BTI Sequence Reference Number -->
	<bean id="btiSequenceRefNumber"
		class="id.co.emobile.samba.web.service.SequenceGeneratorService"
			init-method="initService">
		<property name="appName" value="REF_NUM" />
		<property name="range" value="1000" />
		<property name="sequenceStrategy">
			<bean class="id.co.emobile.samba.web.sequence.DatePrefixSequenceStrategy">
				<property name="limit" value="999999" />
			</bean>
		</property>
	</bean>
	

	<!-- Logic Section -->
	<bean id="logicTemplate" abstract="true" class="id.co.emobile.samba.web.iso.logic.HostBtiLogic">
		<property name="terminalId" value="IBC00134" />
		<property name="acquirerId" value="134" />
	</bean>
	
	<bean id="networkManagementLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.NetworkManagementLogic" 
		scope="prototype" />
		
		<bean id="djpNetworkManagementLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.DjpNetworkManagementLogic" 
		scope="prototype" />
		
		<bean id="sddNetworkManagementLogic" parent="logicTemplate" class="id.co.emobile.samba.web.iso.logic.SddNetworkManagementLogic" scope="prototype" >
			<property name="bit47" value="00627" />
			<property name="bit48" value="prlG55B+BsvfPFLJkBkMLUW5Zd8oUTTM" />		
		</bean>
	
	<bean id="fundTransferLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.FundTransferLogic"
		scope="prototype" />
	
 	<bean id="fundTransferInHouseLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.FundTransferInHouseLogic" 
		scope="prototype">
			<property name="reversalEnabled" value="false" />
			<property name="listReversalRc">
				<list>
					<value>5005</value>
				</list>
			</property>
	</bean>
 	
	<bean id="fundTransferInterbankLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.FundTransferInterbankLogic" 
		scope="prototype">
    <property name="reversalEnabled" value="true" />
			<property name="listReversalRc">
				<list>
					<value>5005</value>
				</list>
			</property>
	</bean>	
	
	<bean id="createIdBillingLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.CreateIdBillingLogic" 
		scope="prototype">
    <property name="reversalEnabled" value="true" />
			<property name="listReversalRc">
				<list>
					<value>5005</value>
				</list>
			</property>
	</bean>	
	
	<bean id="sddBillingLogic" parent="logicTemplate"
		class="id.co.emobile.samba.web.iso.logic.SddBillingLogic" 
		scope="prototype">
    <property name="reversalEnabled" value="true" />
			<property name="listReversalRc">
				<list>
					<value>5005</value>
				</list>
			</property>
	</bean>	

	<!-- Logic Factory -->
	<bean id="isoBtiLogicFactory" class="id.co.emobile.samba.web.iso.logic.IsoLogicFactory" scope="prototype">
		<property name="logicMap">
			<map>				
				<entry key="${fundTransferOther.code}" value-ref="fundTransferInterbankLogic" />				
			</map>
		</property>
	</bean>
	
	<bean id="btiManager" class="id.co.emobile.samba.web.bti.IsoBtiManager" 
			init-method="startManager" destroy-method="stopManager">
		<property name="logicFactory" ref="isoBtiLogicFactory" />
		<property name="pipelineFactory">
			
      <bean class="id.co.emobile.samba.web.netty.SumutPipelineFactory" />  
		</property>
		<property name="networkLogic" ref="networkManagementLogic" />
		<property name="socketTimeout" value="5000" />
		<property name="listConfig">
			<list>
				<!-- format id, amount, ip, port -->
				<!-- <value>BTI1,1,172.32.1.15,3992</value> -->
				<value>BTI1,1,192.168.0.34,3333</value>
			</list>
		</property>		
	</bean>
	
	<!-- Logic Factory DJP / CREATE ID BILLING -->
	<bean id="djpIsoBtiLogicFactory" class="id.co.emobile.samba.web.iso.logic.DjpIsoLogicFactory" scope="prototype">
		<property name="logicMap">
			<map>				
				<entry key="${createIDBilling.code}" value-ref="createIdBillingLogic" />				
			</map>
		</property>
	</bean>
	
	<!-- Logic Factory SDD -->
	<bean id="sddIsoBtiLogicFactory" class="id.co.emobile.samba.web.iso.logic.SddIsoLogicFactory" scope="prototype">
		<property name="logicMap">
			<map>				
				<entry key="${sddBilling.code}" value-ref="sddBillingLogic" />				
			</map>
		</property>
	</bean>
	
	
	
	
</beans>
